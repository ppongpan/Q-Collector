# Dynamic Tables System - Q-Collector

## üìä ‡∏£‡∏∞‡∏ö‡∏ö Dynamic Tables ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ü‡∏≠‡∏£‡πå‡∏°

**Version**: 1.0.0
**Date**: 2025-10-02
**For**: Q-Collector v0.6.0+

---

## üéØ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

‡∏£‡∏∞‡∏ö‡∏ö Dynamic Tables ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á PostgreSQL ‡πÅ‡∏¢‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ü‡∏≠‡∏£‡πå‡∏° ‡πÇ‡∏î‡∏¢:
- ‚úÖ **‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏£‡∏≤‡∏á** (Table Name) ‡∏à‡∏∞‡πÅ‡∏õ‡∏•‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢
- ‚úÖ **‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå** (Column Name) ‡∏à‡∏∞‡πÅ‡∏õ‡∏•‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢
- ‚úÖ **‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•** (Data Type) ‡∏à‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏ü‡∏¥‡∏•‡∏î‡πå
- ‚úÖ **Power BI** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á parse JSON

---

## üîÑ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏ä‡∏∑‡πà‡∏≠

### ‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≠‡∏£‡πå‡∏° (Form Title)

| ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ | Table Name | PowerBI Display |
|---------|------------|-----------------|
| ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ | `form_contact_abc123` | form_contact_abc123 |
| ‡πÉ‡∏ö‡∏•‡∏≤ | `form_leave_form_def456` | form_leave_form_def456 |
| ‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏° | `form_survey_ghi789` | form_survey_ghi789 |
| ‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô | `form_application_jkl012` | form_application_jkl012 |
| ‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô | `form_evaluation_mno345` | form_evaluation_mno345 |

### ‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏¥‡∏•‡∏î‡πå (Field Label)

| ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ | Column Name | PostgreSQL Type |
|---------|-------------|-----------------|
| ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏° | `full_name_abc123` | VARCHAR(255) |
| ‡∏≠‡∏µ‡πÄ‡∏°‡∏• | `email_def456` | VARCHAR(255) |
| ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ | `phone_number_ghi789` | VARCHAR(20) |
| ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà | `address_jkl012` | TEXT |
| ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î | `birth_date_mno345` | DATE |
| ‡πÅ‡∏ú‡∏ô‡∏Å | `department_pqr678` | VARCHAR(255) |
| ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô | `salary_stu901` | NUMERIC |
| ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ | `note_vwx234` | TEXT |

---

## üèóÔ∏è ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á: `form_contact_abc123`

```sql
CREATE TABLE form_contact_abc123 (
  -- System columns (auto-generated)
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  form_id UUID NOT NULL REFERENCES forms(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE SET NULL,
  submission_number INTEGER,
  status VARCHAR(50) DEFAULT 'submitted',
  submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

  -- Dynamic columns (based on form fields)
  full_name_abc123 VARCHAR(255),
  email_def456 VARCHAR(255),
  phone_number_ghi789 VARCHAR(20),
  message_jkl012 TEXT
);

-- Indexes
CREATE INDEX idx_form_contact_abc123_form_id ON form_contact_abc123(form_id);
CREATE INDEX idx_form_contact_abc123_user_id ON form_contact_abc123(user_id);
CREATE INDEX idx_form_contact_abc123_submitted_at ON form_contact_abc123(submitted_at);
```

---

## üé® ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### 1. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÉ‡∏´‡∏°‡πà

```javascript
// User creates form: "‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠"
const form = {
  id: 'form-1234567890-abc123',
  title: '‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠',
  fields: [
    { id: 'field-1', label: '‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°', type: 'short_answer' },
    { id: 'field-2', label: '‡∏≠‡∏µ‡πÄ‡∏°‡∏•', type: 'email' },
    { id: 'field-3', label: '‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£', type: 'phone' },
    { id: 'field-4', label: '‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°', type: 'paragraph' }
  ]
};

// System automatically:
// 1. Translates form title: "‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠" -> "form_contact"
// 2. Generates table name: "form_contact_abc123"
// 3. Creates table with columns:
//    - full_name_field1 VARCHAR(255)
//    - email_field2 VARCHAR(255)
//    - phone_number_field3 VARCHAR(20)
//    - message_field4 TEXT
```

### 2. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏¥‡∏•‡∏î‡πå

```javascript
// User adds new field: "‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà"
// System automatically:
// 1. Translates: "‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà" -> "address"
// 2. Adds column: ALTER TABLE form_contact_abc123 ADD COLUMN address_field5 TEXT;
```

### 3. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°

```javascript
// User submits data
const submissionData = {
  'full_name_field1': '‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ',
  'email_field2': 'somchai@example.com',
  'phone_number_field3': '0812345678',
  'message_field4': '‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'
};

// System inserts into form_contact_abc123 table
INSERT INTO form_contact_abc123 (
  form_id, user_id,
  full_name_field1, email_field2, phone_number_field3, message_field4
) VALUES (
  'form-1234567890-abc123', 'user-123',
  '‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ', 'somchai@example.com', '0812345678', '‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'
);
```

---

## üìñ ‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå Thai-English Dictionary

‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏µ‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ **100 ‡∏Ñ‡∏≥** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢:

### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•
- ‡∏ä‡∏∑‡πà‡∏≠ ‚Üí name
- ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‚Üí surname
- ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏° ‚Üí full_name
- ‡πÄ‡∏û‡∏® ‚Üí gender
- ‡∏≠‡∏≤‡∏¢‡∏∏ ‚Üí age
- ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î ‚Üí birth_date

### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠
- ‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‚Üí email
- ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå ‚Üí phone
- ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ‚Üí mobile
- ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà ‚Üí address
- ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ‚Üí province
- ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå ‚Üí postal_code

### ‡∏á‡∏≤‡∏ô/‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤
- ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‚Üí company
- ‡πÅ‡∏ú‡∏ô‡∏Å ‚Üí department
- ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ‚Üí position
- ‡∏≠‡∏≤‡∏ä‡∏µ‡∏û ‚Üí occupation
- ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‚Üí salary
- ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‚Üí education

### ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
- ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô ‚Üí national_id
- ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á ‚Üí passport
- ‡πÉ‡∏ö‡∏Ç‡∏±‡∏ö‡∏Ç‡∏µ‡πà ‚Üí driving_license

### ‡∏ü‡∏≠‡∏£‡πå‡∏°
- ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏° ‚Üí form
- ‡πÉ‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£ ‚Üí application
- ‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏° ‚Üí survey
- ‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô ‚Üí evaluation
- ‡πÉ‡∏ö‡∏•‡∏≤ ‚Üí leave_form
- ‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‚Üí approval_form

[‡∏î‡∏π‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà `backend/utils/thaiTranslator.js`]

---

## üîß ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô API

### ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°

```javascript
const DynamicTableService = require('./services/DynamicTableService');
const service = new DynamicTableService();

// Create table when form is created
const form = {
  id: 'form-123',
  title: '‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠',
  fields: [
    { id: 'field-1', label: '‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°', type: 'short_answer' },
    { id: 'field-2', label: '‡∏≠‡∏µ‡πÄ‡∏°‡∏•', type: 'email' }
  ]
};

const tableName = await service.createFormTable(form);
// Returns: "form_contact_abc123"
```

### Insert Submission

```javascript
await service.insertSubmission(
  formId,
  tableName,
  userId,
  {
    full_name_field1: '‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ',
    email_field2: 'somchai@example.com'
  }
);
```

### Query Submissions

```javascript
const submissions = await service.getSubmissions(tableName, {
  userId: 'user-123',
  startDate: '2025-01-01',
  limit: 10
});
```

---

## üìä Power BI Connection

### ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

```
Server: localhost:5432
Database: qcollector_dev_2025
Username: qcollector
Password: qcollector_dev_2025

Tables: form_contact_abc123, form_leave_def456, form_survey_ghi789, ...
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Power Query (M)

```m
let
    Source = PostgreSQL.Database("localhost:5432", "qcollector_dev_2025"),

    // Select contact form submissions
    ContactFormTable = Source{[Schema="public", Item="form_contact_abc123"]}[Data],

    // Rename columns for better display
    RenamedColumns = Table.RenameColumns(ContactFormTable, {
        {"full_name_field1", "Full Name"},
        {"email_field2", "Email"},
        {"phone_number_field3", "Phone"},
        {"submitted_at", "Submitted Date"}
    })
in
    RenamedColumns
```

---

## ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

### 1. Run Migration

```bash
cd backend
npm run migrate
```

Migration ‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° column `table_name` ‡πÉ‡∏ô `forms` table

### 2. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•‡πÉ‡∏´‡∏°‡πà (Optional)

```javascript
const { addTranslation } = require('./utils/thaiTranslator');

// Add custom translations
addTranslation('‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢', 'english_word');
addTranslation('‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ç‡∏≤‡∏¢', 'sales_department');
```

### 3. Test Translation

```bash
cd backend
npm test -- thaiTranslator.test.js
```

---

## üéØ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ

### ‚úÖ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Developer
- Query ‡∏ï‡∏£‡∏á‡πÑ‡∏õ‡∏ï‡∏£‡∏á‡∏°‡∏≤ (SELECT * FROM form_contact WHERE...)
- ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á parse JSON
- Index ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà
- Performance ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ EAV pattern

### ‚úÖ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Power BI
- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- Columns ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô complex M query
- Refresh ‡πÄ‡∏£‡πá‡∏ß

### ‚úÖ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏£‡∏≤‡∏á/‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢
- ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à
- ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô SQL query ‡πÄ‡∏≠‡∏á

---

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á

### 1. ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏¥‡∏•‡∏î‡πå
- **‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏´‡∏°‡πà**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ ADD COLUMN ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‚úÖ
- **‡∏•‡∏ö‡∏ü‡∏¥‡∏•‡∏î‡πå**: ‡∏£‡∏∞‡∏ö‡∏ö**‡πÑ‡∏°‡πà‡∏•‡∏ö** column ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤) ‚ö†Ô∏è
- **‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏¥‡∏•‡∏î‡πå**: ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á column ‡πÉ‡∏´‡∏°‡πà (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà) ‚ö†Ô∏è

### 2. ‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°
- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏° ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏î‡πâ‡∏ß‡∏¢ (CASCADE DELETE)
- **‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥**: ‡∏ó‡∏≥ Backup ‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°

### 3. ‡∏Ç‡∏ô‡∏≤‡∏î Database
- ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏à‡∏∞‡∏°‡∏µ 1 table
- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏¢‡∏≠‡∏∞ (>1000) ‡∏≠‡∏≤‡∏à‡∏°‡∏µ table ‡πÄ‡∏¢‡∏≠‡∏∞
- ‡πÉ‡∏ä‡πâ `information_schema` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£

---

## üîç Troubleshooting

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á

```sql
-- Check if table exists
SELECT tablename FROM pg_tables
WHERE schemaname = 'public'
AND tablename LIKE 'form_%';

-- Check table_name in forms
SELECT id, title, table_name FROM forms;
```

### ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

```javascript
// Test translation
const { translateFieldLabel } = require('./utils/thaiTranslator');
console.log(translateFieldLabel('‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì'));
```

### ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•‡πÉ‡∏´‡∏°‡πà

```javascript
// Add to backend/utils/thaiTranslator.js
const thaiEnglishDict = {
  // ... existing ...
  '‡∏Ñ‡∏≥‡πÉ‡∏´‡∏°‡πà': 'new_word',
};
```

---

## üìö ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

```
backend/
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ thaiTranslator.js          # Thai-English dictionary & translator
‚îÇ   ‚îî‚îÄ‚îÄ tableNameHelper.js         # Table/column name generator
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ DynamicTableService.js     # Create & manage dynamic tables
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îî‚îÄ‚îÄ 20251002000001-add-table-name-to-forms.js
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ unit/utils/
        ‚îú‚îÄ‚îÄ thaiTranslator.test.js
        ‚îî‚îÄ‚îÄ tableNameHelper.test.js
```

---

## üöÄ Roadmap

### Phase 1 (Current)
- ‚úÖ Thai-English translation with dictionary
- ‚úÖ Auto table creation
- ‚úÖ Auto column creation
- ‚úÖ Basic CRUD operations

### Phase 2 (Planned)
- üîÑ AI-powered translation (Google Translate API)
- üîÑ Custom translation per form
- üîÑ Migration wizard for existing data
- üîÑ View/Materialized View option

### Phase 3 (Future)
- üîÆ Multi-language support (EN, TH, CN)
- üîÆ Auto-optimize queries
- üîÆ Smart indexing based on usage

---

## üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠

‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•‡πÉ‡∏´‡∏°‡πà:
- ‡πÄ‡∏õ‡∏¥‡∏î Issue ‡∏ó‡∏µ‡πà GitHub
- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `backend/utils/thaiTranslator.js` ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

---

**Created**: 2025-10-02
**Version**: 1.0.0
**Author**: Q-Collector Development Team
