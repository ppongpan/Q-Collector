# PDPA Forms & Data Tab Improvement Plan

**Version**: v0.8.5-dev
**Date**: 2025-10-24
**Status**: üìã PLANNING
**Priority**: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê HIGH

---

## üìã USER REQUIREMENTS

### Current Problem:
‡πÉ‡∏ô tab "‡∏ü‡∏≠‡∏£‡πå‡∏° & ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" ‡∏Ç‡∏≠‡∏á Personal Data Management Dashboard ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏±‡∏ô:
- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏•‡∏∞ submissions ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏¢‡∏Å
- Consent items ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô tab ‡∏≠‡∏∑‡πà‡∏ô
- ‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏≠‡∏±‡∏ô

### Required Solution:
‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏ß‡πâ‡πÉ‡∏ô tab "‡∏ü‡∏≠‡∏£‡πå‡∏° & ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" ‡πÇ‡∏î‡∏¢‡πÅ‡∏™‡∏î‡∏á:

1. **‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≠‡∏£‡πå‡∏°** (Form Title)
2. **‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Consent Items** ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ô‡∏±‡πâ‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°:
   - ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏° (Given/Denied)
   - **‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•** (Signature Image)
   - ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏•‡∏á‡∏ô‡∏≤‡∏° (Full Name)
   - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ô‡∏≤‡∏° (Consented At)
   - IP Address
3. **‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ü‡∏¥‡∏•‡∏î‡πå PII** (Personal Data Fields) ‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
4. ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô **card/‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô** ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏ü‡∏≠‡∏£‡πå‡∏°

---

## üé® UI DESIGN MOCKUP

### Improved Forms & Data Tab Layout

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‡∏ü‡∏≠‡∏£‡πå‡∏° & ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (3 ‡∏ü‡∏≠‡∏£‡πå‡∏°) - ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìã ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö PDPA                                      ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: 29 ‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô 2568                                     ‚îÇ
‚îÇ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á: 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á                                           ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏° (3 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)                                       ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ ‚îÇ ‚úÖ ‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå: ‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤                ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤: 2 ‡∏õ‡∏µ                                  ‚îÇ  ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ üë§ ‡∏ú‡∏π‡πâ‡∏•‡∏á‡∏ô‡∏≤‡∏°: ‡∏à‡∏≠‡∏´‡πå‡∏ô ‡∏™‡∏°‡∏¥‡∏ò                                  ‚îÇ  ‚îÇ
‚îÇ ‚îÇ üìÖ ‡∏•‡∏á‡∏ô‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠: 29 ‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô 2568 ‡πÄ‡∏ß‡∏•‡∏≤ 14:53 ‡∏ô.            ‚îÇ  ‚îÇ
‚îÇ ‚îÇ üåê IP: 203.154.xxx.xxx                                   ‚îÇ  ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚úçÔ∏è ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•:                                        ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚îÇ  [Signature Image - Base64 PNG]             ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚îÇ                                              ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚îÇ  ~~John Smith~~                              ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚îÇ                                              ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ [üîç ‡∏î‡∏π‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏ï‡πá‡∏°]                                         ‚îÇ  ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ ‚îÇ ‚úÖ ‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î                               ‚îÇ  ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£              ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤: 3 ‡∏õ‡∏µ                                  ‚îÇ  ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ üë§ ‡∏ú‡∏π‡πâ‡∏•‡∏á‡∏ô‡∏≤‡∏°: ‡∏à‡∏≠‡∏´‡πå‡∏ô ‡∏™‡∏°‡∏¥‡∏ò                                  ‚îÇ  ‚îÇ
‚îÇ ‚îÇ üìÖ ‡∏•‡∏á‡∏ô‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠: 29 ‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô 2568 ‡πÄ‡∏ß‡∏•‡∏≤ 14:53 ‡∏ô.            ‚îÇ  ‚îÇ
‚îÇ ‚îÇ üåê IP: 203.154.xxx.xxx                                   ‚îÇ  ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚úçÔ∏è ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•:                                        ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚îÇ  [Signature Image]                          ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ [üîç ‡∏î‡∏π‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏ï‡πá‡∏°]                                         ‚îÇ  ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ ‚îÇ ‚ùå ‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ñ‡∏π‡πà‡∏Ñ‡πâ‡∏≤               ‚îÇ  ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå: ‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏±‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£                ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤: 5 ‡∏õ‡∏µ                                  ‚îÇ  ‚îÇ
‚îÇ ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏° (Denied)                                    ‚îÇ  ‚îÇ
‚îÇ ‚îÇ üìÖ ‡∏ï‡∏≠‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠: 29 ‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô 2568 ‡πÄ‡∏ß‡∏•‡∏≤ 14:53 ‡∏ô.              ‚îÇ  ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• (5 ‡∏ü‡∏¥‡∏•‡∏î‡πå)                                  ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ ‚îÇ ‡∏ü‡∏¥‡∏•‡∏î‡πå            ‚îÇ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó        ‚îÇ ‡∏Ñ‡πà‡∏≤                 ‚îÇ  ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ
‚îÇ ‚îÇ ‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•     ‚îÇ short_answer  ‚îÇ ‡∏à‡∏≠‡∏´‡πå‡∏ô ‡∏™‡∏°‡∏¥‡∏ò          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡∏≠‡∏µ‡πÄ‡∏°‡∏•           ‚îÇ email         ‚îÇ john@example.com    ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£         ‚îÇ phone         ‚îÇ 091-291-1234        ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà          ‚îÇ paragraph     ‚îÇ 123 Main St, BKK    ‚îÇ  ‚îÇ
‚îÇ ‚îÇ ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î         ‚îÇ date          ‚îÇ 15/05/1990          ‚îÇ  ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ [‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î] [‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (2)]                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìã Customer Feedback Survey                                    ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: 15 ‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô 2568                                     ‚îÇ
‚îÇ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á: 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á                                           ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏° (2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)                                       ‚îÇ
‚îÇ ...                                                            ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• (3 ‡∏ü‡∏¥‡∏•‡∏î‡πå)                                  ‚îÇ
‚îÇ ...                                                            ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ [‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î]                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üèóÔ∏è TECHNICAL ARCHITECTURE

### Current Data Flow (v0.8.4):

```
getProfileDetail() ‚Üí uniqueForms[] ‚Üí ProfileDetailModal ‚Üí Forms Tab
                   ‚Üí consents[]    ‚Üí ProfileDetailModal ‚Üí Consents Tab (separate)
```

**Problem**: Consents ‡πÅ‡∏•‡∏∞ Forms ‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô

### New Data Flow (v0.8.5):

```
getProfileDetail() ‚Üí uniqueForms[] ‚Üí (group consents by form_id)
                                   ‚Üí (include signature_data)
                   ‚Üì
ProfileDetailModal ‚Üí Forms & Data Tab
                   ‚Üí Display: Form + Consents + Signatures + PII
```

**Solution**: Group consents into uniqueForms

---

## üì¶ IMPLEMENTATION PLAN - 3 PHASES

### **PHASE 1: Backend Enhancement (2-3 hours)**

#### Task 1.1: Group Consents by Form ID
**File**: `backend/services/UnifiedUserProfileService.js`

**Current Code** (lines 251-281):
```javascript
// ‚úÖ v0.8.4: Group submissions by form to show unique forms
const formMap = new Map();
enrichedSubmissions.forEach(submission => {
  const formId = submission.form_id;
  if (!formMap.has(formId)) {
    formMap.set(formId, {
      formId,
      formTitle: submission.form?.title || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≠‡∏£‡πå‡∏°',
      formTableName: submission.form?.table_name,
      submissionCount: 0,
      submissions: [],
      latestSubmission: null,
      firstSubmission: null
    });
  }
  // ... rest of grouping logic
});
```

**New Code**:
```javascript
// ‚úÖ v0.8.5: Group consents by form_id
const consentsByForm = new Map();
consents.forEach(consent => {
  const consentJson = consent.toJSON();
  const formId = consentJson.form_id;

  if (!consentsByForm.has(formId)) {
    consentsByForm.set(formId, []);
  }

  consentsByForm.get(formId).push({
    id: consentJson.id,
    consentItemId: consentJson.consent_item_id,
    consentItemTitle: consentJson.consentItem?.title_th || consentJson.consentItem?.title_en,
    consentItemDescription: consentJson.consentItem?.description,
    purpose: consentJson.consentItem?.purpose,
    retentionPeriod: consentJson.consentItem?.retention_period,
    consentGiven: consentJson.consent_given,

    // ‚úÖ v0.8.5: Add signature data
    signatureData: consentJson.signature_data, // Base64 PNG
    fullName: consentJson.full_name,
    consentedAt: consentJson.consented_at,
    ipAddress: consentJson.ip_address,
    userAgent: consentJson.user_agent
  });
});

// ‚úÖ v0.8.5: Group submissions by form WITH consents
const formMap = new Map();
enrichedSubmissions.forEach(submission => {
  const formId = submission.form_id;
  if (!formMap.has(formId)) {
    formMap.set(formId, {
      formId,
      formTitle: submission.form?.title || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ü‡∏≠‡∏£‡πå‡∏°',
      formTableName: submission.form?.table_name,
      submissionCount: 0,
      submissions: [],
      latestSubmission: null,
      firstSubmission: null,

      // ‚úÖ v0.8.5: Add consents to each form
      consents: consentsByForm.get(formId) || []
    });
  }

  const formGroup = formMap.get(formId);
  formGroup.submissionCount++;
  formGroup.submissions.push(submission);

  // Track latest and first submissions
  const submittedAt = new Date(submission.submitted_at || submission.submittedAt);
  if (!formGroup.latestSubmission || submittedAt > new Date(formGroup.latestSubmission.submitted_at || formGroup.latestSubmission.submittedAt)) {
    formGroup.latestSubmission = submission;
  }
  if (!formGroup.firstSubmission || submittedAt < new Date(formGroup.firstSubmission.submitted_at || formGroup.firstSubmission.submittedAt)) {
    formGroup.firstSubmission = submission;
  }
});

const uniqueForms = Array.from(formMap.values());
```

**Changes Summary**:
1. Group consents by `form_id`
2. Include `signature_data`, `full_name`, `consented_at`, `ip_address` in consent objects
3. Attach consents array to each form in `uniqueForms`

**Success Criteria**:
- ‚úÖ Each form in `uniqueForms` has `consents` array
- ‚úÖ Consents include signature data (Base64 PNG)
- ‚úÖ Consents include full name and timestamp
- ‚úÖ Multiple submissions of same form share consent data

---

#### Task 1.2: Update _getConsentsForProfile to include Submission
**File**: `backend/services/UnifiedUserProfileService.js`

**Current Code** (lines 707-736):
```javascript
async _getConsentsForProfile(profile) {
  const where = { [Op.or]: [] };

  if (profile.linked_emails.length > 0) {
    const consents = await UserConsent.findAll({
      where: {
        submission_id: { [Op.in]: profile.submission_ids }
      },
      include: [
        {
          model: ConsentItem,
          as: 'consentItem',
          attributes: ['id', 'title_th', 'title_en', 'purpose', 'retention_period']
        },
        {
          model: Form,
          as: 'form',
          attributes: ['id', 'title']
        }
      ],
      order: [['consented_at', 'DESC']]
    });

    return consents;
  }

  return [];
}
```

**New Code**:
```javascript
async _getConsentsForProfile(profile) {
  const where = { [Op.or]: [] };

  if (profile.linked_emails.length > 0) {
    const consents = await UserConsent.findAll({
      where: {
        submission_id: { [Op.in]: profile.submission_ids }
      },
      include: [
        {
          model: ConsentItem,
          as: 'consentItem',
          attributes: ['id', 'title_th', 'title_en', 'description', 'purpose', 'retention_period']
        },
        {
          model: Form,
          as: 'form',
          attributes: ['id', 'title']
        },
        {
          model: Submission,
          as: 'submission',
          attributes: ['id', 'form_id'] // ‚úÖ v0.8.5: Add submission to get form_id
        }
      ],
      order: [['consented_at', 'DESC']]
    });

    return consents;
  }

  return [];
}
```

**Changes Summary**:
1. Include `Submission` model to ensure `form_id` is accessible
2. Include `description` field from ConsentItem

---

### **PHASE 2: Frontend UI Enhancement (3-4 hours)**

#### Task 2.1: Create SignatureDisplay Component
**File**: `src/components/pdpa/SignatureDisplay.jsx` (NEW)

**Component Code**:
```jsx
/**
 * SignatureDisplay Component
 * Displays digital signature image with modal for full view
 *
 * @param {string} signatureData - Base64 encoded PNG signature
 * @param {string} fullName - Name of person who signed
 * @param {string} consentedAt - Timestamp of signature
 * @param {string} ipAddress - IP address when signed
 */
import React, { useState } from 'react';
import { Eye, X } from 'lucide-react';

const SignatureDisplay = ({ signatureData, fullName, consentedAt, ipAddress }) => {
  const [showModal, setShowModal] = useState(false);

  if (!signatureData) {
    return (
      <div className="text-xs text-gray-500 dark:text-gray-400 italic">
        ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•
      </div>
    );
  }

  // Format signature data URL
  const signatureUrl = signatureData.startsWith('data:')
    ? signatureData
    : `data:image/png;base64,${signatureData}`;

  return (
    <>
      <div className="mt-2">
        <p className="text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">
          ‚úçÔ∏è ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•:
        </p>
        <div className="border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-900">
          <img
            src={signatureUrl}
            alt={`‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏Ç‡∏≠‡∏á ${fullName}`}
            className="w-full h-20 object-contain"
          />
          <div className="mt-2 flex items-center justify-between">
            <div className="text-xs text-gray-600 dark:text-gray-400">
              <p>üë§ {fullName}</p>
              <p>üìÖ {new Date(consentedAt).toLocaleString('th-TH')}</p>
              {ipAddress && <p>üåê IP: {ipAddress}</p>}
            </div>
            <button
              onClick={() => setShowModal(true)}
              className="flex items-center gap-1 px-3 py-1.5 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors"
            >
              <Eye className="w-3 h-3" />
              ‡∏î‡∏π‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏ï‡πá‡∏°
            </button>
          </div>
        </div>
      </div>

      {/* Full Size Modal */}
      {showModal && (
        <div
          className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[9999] p-4"
          onClick={() => setShowModal(false)}
        >
          <div
            className="bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6 relative"
            onClick={(e) => e.stopPropagation()}
          >
            <button
              onClick={() => setShowModal(false)}
              className="absolute top-4 right-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"
            >
              <X className="w-5 h-5 text-gray-600 dark:text-gray-400" />
            </button>

            <h3 className="text-lg font-semibold text-gray-900 dark:text-white mb-4">
              ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•
            </h3>

            <div className="border border-gray-300 dark:border-gray-600 rounded-lg p-6 bg-gray-50 dark:bg-gray-900">
              <img
                src={signatureUrl}
                alt={`‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏Ç‡∏≠‡∏á ${fullName}`}
                className="w-full h-auto max-h-96 object-contain"
              />
            </div>

            <div className="mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
              <p className="text-sm text-gray-900 dark:text-white font-medium mb-2">
                ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ô‡∏≤‡∏°:
              </p>
              <div className="space-y-1 text-sm text-gray-700 dark:text-gray-300">
                <p>üë§ ‡∏ú‡∏π‡πâ‡∏•‡∏á‡∏ô‡∏≤‡∏°: {fullName}</p>
                <p>üìÖ ‡∏•‡∏á‡∏ô‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠: {new Date(consentedAt).toLocaleString('th-TH', {
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric',
                  hour: '2-digit',
                  minute: '2-digit',
                  second: '2-digit'
                })}</p>
                {ipAddress && <p>üåê IP Address: {ipAddress}</p>}
              </div>
            </div>
          </div>
        </div>
      )}
    </>
  );
};

export default SignatureDisplay;
```

**Features**:
- Display signature thumbnail (height: 80px)
- Click to view full size in modal
- Show metadata (name, date, IP)
- Support Base64 PNG format
- Dark mode compatible

---

#### Task 2.2: Update Forms & Data Tab UI
**File**: `src/components/pdpa/ProfileDetailModal.jsx`

**Current Section** (lines 434-610): Shows unique forms with PII preview

**New Enhanced Section**:
```jsx
{/* Forms & Data Tab - ‚úÖ v0.8.5: Show unique forms with Consents + Signatures + PII */}
{activeTab === 'forms' && (
  <div className="space-y-6">
    <div className="flex items-center justify-between mb-4">
      <h3 className="text-lg font-semibold text-gray-900 dark:text-white">
        ‡∏ü‡∏≠‡∏£‡πå‡∏° ({profile.uniqueForms?.length || 0}) - ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ({profile.submissions?.length || 0} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)
      </h3>
    </div>

    {profile.uniqueForms && profile.uniqueForms.length > 0 ? (
      profile.uniqueForms.map((formGroup) => {
        const isExpanded = expandedFormIds.has(formGroup.formId);
        const latestSubmission = formGroup.latestSubmission;
        const hasConsents = formGroup.consents && formGroup.consents.length > 0;

        return (
          <div
            key={formGroup.formId}
            className="bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl border-2 border-gray-200 dark:border-gray-700 overflow-hidden shadow-lg"
          >
            {/* Form Header */}
            <div className="p-6 bg-gradient-to-r from-orange-50 to-white dark:from-orange-900/10 dark:to-gray-800">
              <div className="flex items-start justify-between mb-3">
                <div className="flex-1">
                  <h4 className="text-xl font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                    üìã {formGroup.formTitle}
                  </h4>
                  <div className="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
                    <span>
                      üìÖ ‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: {latestSubmission?.submittedAt || latestSubmission?.submitted_at
                        ? new Date(latestSubmission.submittedAt || latestSubmission.submitted_at).toLocaleDateString('th-TH', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                          })
                        : '-'}
                    </span>
                    <span className="px-3 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400 text-sm rounded-full font-medium">
                      üìä {formGroup.submissionCount} ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div className="p-6 space-y-6">
              {/* ‚úÖ v0.8.5: Consent Items Section with Signatures */}
              {hasConsents && (
                <div>
                  <div className="flex items-center gap-2 mb-4">
                    <h5 className="text-base font-semibold text-gray-900 dark:text-white">
                      ‚úÖ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏° ({formGroup.consents.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)
                    </h5>
                  </div>

                  <div className="space-y-3">
                    {formGroup.consents.map((consent) => (
                      <div
                        key={consent.id}
                        className={`border-2 rounded-lg p-4 ${
                          consent.consentGiven
                            ? 'border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/10'
                            : 'border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/10'
                        }`}
                      >
                        {/* Consent Header */}
                        <div className="flex items-start gap-3 mb-3">
                          <div className="flex-shrink-0 mt-1">
                            {consent.consentGiven ? (
                              <CheckCircle2 className="w-6 h-6 text-green-600 dark:text-green-400" />
                            ) : (
                              <XCircle className="w-6 h-6 text-red-600 dark:text-red-400" />
                            )}
                          </div>
                          <div className="flex-1">
                            <h6 className="font-medium text-gray-900 dark:text-white mb-1">
                              {consent.consentItemTitle}
                            </h6>
                            {consent.consentItemDescription && (
                              <p className="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                {consent.consentItemDescription}
                              </p>
                            )}
                            <div className="flex flex-wrap gap-3 text-xs text-gray-600 dark:text-gray-400">
                              <span>üéØ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå: {consent.purpose || '-'}</span>
                              <span>‚è±Ô∏è ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤: {consent.retentionPeriod || '-'}</span>
                            </div>
                          </div>
                        </div>

                        {/* Consent Status */}
                        <div className="mb-3 pt-3 border-t border-gray-200 dark:border-gray-700">
                          <div className="flex items-center gap-4 text-sm">
                            <span className={`font-medium ${
                              consent.consentGiven
                                ? 'text-green-700 dark:text-green-300'
                                : 'text-red-700 dark:text-red-300'
                            }`}>
                              {consent.consentGiven ? '‚úÖ ‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏° (Given)' : '‚ùå ‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏° (Denied)'}
                            </span>
                            <span className="text-gray-600 dark:text-gray-400">
                              üìÖ {new Date(consent.consentedAt).toLocaleString('th-TH', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric',
                                hour: '2-digit',
                                minute: '2-digit'
                              })}
                            </span>
                          </div>
                        </div>

                        {/* ‚úÖ v0.8.5: Digital Signature Display */}
                        {consent.consentGiven && consent.signatureData && (
                          <div className="mt-3 pt-3 border-t border-gray-200 dark:border-gray-700">
                            <SignatureDisplay
                              signatureData={consent.signatureData}
                              fullName={consent.fullName}
                              consentedAt={consent.consentedAt}
                              ipAddress={consent.ipAddress}
                            />
                          </div>
                        )}

                        {/* No Signature Message */}
                        {consent.consentGiven && !consent.signatureData && (
                          <div className="mt-3 pt-3 border-t border-gray-200 dark:border-gray-700">
                            <p className="text-xs text-gray-500 dark:text-gray-400 italic flex items-center gap-1">
                              <span>‚úçÔ∏è</span>
                              <span>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•</span>
                            </p>
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {/* PII Fields Section */}
              {latestSubmission?.piiFieldValues && latestSubmission.piiFieldValues.length > 0 && (
                <div className="mt-6 pt-6 border-t-2 border-gray-200 dark:border-gray-700">
                  <div className="flex items-center gap-2 mb-4">
                    <h5 className="text-base font-semibold text-gray-900 dark:text-white">
                      üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• ({latestSubmission.piiFieldCount} ‡∏ü‡∏¥‡∏•‡∏î‡πå)
                    </h5>
                    {latestSubmission.piiFieldValues.some(f => f.isEncrypted) && (
                      <span className="px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-[10px] rounded-full font-medium">
                        üîí Encrypted
                      </span>
                    )}
                  </div>
                  <div className="overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700">
                    <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead className="bg-gray-100 dark:bg-gray-800">
                        <tr>
                          <th className="px-4 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-400 uppercase">
                            ‡∏ü‡∏¥‡∏•‡∏î‡πå
                          </th>
                          <th className="px-4 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-400 uppercase">
                            ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
                          </th>
                          <th className="px-4 py-3 text-left text-xs font-medium text-gray-600 dark:text-gray-400 uppercase">
                            ‡∏Ñ‡πà‡∏≤
                          </th>
                        </tr>
                      </thead>
                      <tbody className="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                        {latestSubmission.piiFieldValues.map((field, idx) => (
                          <tr key={idx} className="hover:bg-gray-50 dark:hover:bg-gray-800/50">
                            <td className="px-4 py-3 text-sm text-gray-900 dark:text-white font-medium">
                              {field.fieldTitle}
                              {field.isEncrypted && (
                                <span className="ml-1 text-green-600 dark:text-green-400" title="Encrypted">üîí</span>
                              )}
                            </td>
                            <td className="px-4 py-3 text-sm">
                              <span className="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded text-xs">
                                {field.fieldType}
                              </span>
                            </td>
                            <td className="px-4 py-3 text-sm text-gray-900 dark:text-white">
                              {field.value !== null && field.value !== undefined ? (
                                typeof field.value === 'object' ? (
                                  <pre className="text-xs text-gray-700 dark:text-gray-300 overflow-x-auto">
                                    {JSON.stringify(field.value, null, 2)}
                                  </pre>
                                ) : (
                                  <span className="break-words">{String(field.value)}</span>
                                )
                              ) : (
                                <span className="text-gray-400 dark:text-gray-500 italic">-</span>
                              )}
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              )}

              {/* Action Buttons */}
              <div className="mt-6 flex gap-3">
                <button
                  onClick={() => handleViewSubmission(latestSubmission.id)}
                  className="flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors shadow-md"
                >
                  <ExternalLink className="w-5 h-5" />
                  ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                </button>
                {formGroup.submissionCount > 1 && (
                  <button
                    onClick={() => handleToggleFormExpand(formGroup.formId)}
                    className="px-5 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-lg transition-colors flex items-center gap-2 shadow-md"
                  >
                    <ChevronRight className={`w-5 h-5 transition-transform ${isExpanded ? 'rotate-90' : ''}`} />
                    {isExpanded ? '‡∏ã‡πà‡∏≠‡∏ô' : '‡∏î‡∏π'}‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ({formGroup.submissionCount})
                  </button>
                )}
              </div>
            </div>

            {/* Expanded Submissions List */}
            {isExpanded && formGroup.submissionCount > 1 && (
              <div className="border-t-2 border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50">
                <div className="p-6 space-y-3">
                  <p className="text-sm font-semibold text-gray-900 dark:text-white mb-4">
                    üìã ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ({formGroup.submissionCount} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á):
                  </p>
                  {formGroup.submissions.map((submission, idx) => (
                    <div
                      key={submission.id}
                      className="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 hover:border-orange-300 dark:hover:border-orange-700 transition-colors"
                    >
                      <div className="flex items-center justify-between">
                        <div className="flex-1">
                          <p className="text-sm text-gray-900 dark:text-white font-medium mb-1">
                            üìù ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà {formGroup.submissionCount - idx}
                          </p>
                          <p className="text-xs text-gray-600 dark:text-gray-400">
                            üìÖ {submission.submittedAt || submission.submitted_at
                              ? new Date(submission.submittedAt || submission.submitted_at).toLocaleString('th-TH', {
                                  year: 'numeric',
                                  month: 'long',
                                  day: 'numeric',
                                  hour: '2-digit',
                                  minute: '2-digit'
                                })
                              : '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà'}
                          </p>
                        </div>
                        <button
                          onClick={() => handleViewSubmission(submission.id)}
                          className="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium rounded-lg transition-colors flex items-center gap-1.5 shadow"
                        >
                          <ExternalLink className="w-4 h-4" />
                          ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>
        );
      })
    ) : (
      <div className="text-center py-12 bg-gray-50 dark:bg-gray-900/50 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-700">
        <FileText className="w-16 h-16 text-gray-400 mx-auto mb-4" />
        <p className="text-gray-600 dark:text-gray-400 text-lg">
          ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ü‡∏≠‡∏£‡πå‡∏°
        </p>
      </div>
    )}
  </div>
)}
```

**Import SignatureDisplay**:
```jsx
import SignatureDisplay from './SignatureDisplay';
```

---

### **PHASE 3: Testing & Documentation (1 hour)**

#### Task 3.1: Manual Testing Checklist

**Test Scenarios**:

1. **Display Unique Forms**:
   - ‚úÖ Each form appears only once
   - ‚úÖ Form count matches unique forms (not submissions)
   - ‚úÖ Latest submission date correct

2. **Consent Items Display**:
   - ‚úÖ All consent items for form shown
   - ‚úÖ Status (Given/Denied) displayed correctly
   - ‚úÖ Purpose and retention period visible

3. **Digital Signature**:
   - ‚úÖ Signature thumbnail displays (80px height)
   - ‚úÖ Signature modal opens on click
   - ‚úÖ Full size signature visible in modal
   - ‚úÖ Metadata shown (name, date, IP)
   - ‚úÖ Modal closes correctly

4. **PII Fields**:
   - ‚úÖ All PII fields listed
   - ‚úÖ Field types displayed
   - ‚úÖ Values visible (with masking if applicable)
   - ‚úÖ Encrypted fields marked with üîí

5. **Multiple Forms**:
   - ‚úÖ Each form card styled uniquely
   - ‚úÖ Cards stacked vertically
   - ‚úÖ Expand/collapse works for submissions list

6. **Edge Cases**:
   - ‚úÖ Form with no consents
   - ‚úÖ Consent without signature
   - ‚úÖ Form with no PII fields
   - ‚úÖ Empty profile (no forms)

---

#### Task 3.2: Update Documentation

**Files to Update**:
1. `CLAUDE.md` - Add v0.8.5 changelog
2. `PDPA_UI_LOCATION.md` - Update Forms & Data tab description
3. Create `SIGNATURE-DISPLAY-GUIDE.md` - Guide for signature display component

---

## üìä SUCCESS CRITERIA

### Functional Requirements:
- ‚úÖ Forms & Data tab shows unique forms (not duplicate submissions)
- ‚úÖ Each form displays associated consent items
- ‚úÖ Digital signatures displayed with thumbnail + modal
- ‚úÖ PII fields shown in table format
- ‚úÖ Multiple forms displayed as separate cards

### Technical Requirements:
- ‚úÖ Backend groups consents by form_id
- ‚úÖ Signature data (Base64 PNG) included in API response
- ‚úÖ SignatureDisplay component reusable
- ‚úÖ Dark mode support throughout
- ‚úÖ Responsive design (mobile-friendly)

### User Experience Requirements:
- ‚úÖ Clear visual hierarchy (Form ‚Üí Consents ‚Üí PII)
- ‚úÖ Easy to scan and understand
- ‚úÖ Signature verification metadata visible
- ‚úÖ Fast loading (optimized queries)

---

## üìà ESTIMATED TIME

**Total Duration**: 6-8 hours

**Breakdown**:
- Phase 1 (Backend): 2-3 hours
- Phase 2 (Frontend): 3-4 hours
- Phase 3 (Testing): 1 hour

**Priority**: HIGH - Improve PDPA compliance UX
**Version**: v0.8.5-dev
**Status**: Ready to implement

---

## üöÄ NEXT STEPS

1. ‚úÖ Plan approved - Write to qtodo.md
2. ‚è≥ Implement Phase 1 (Backend)
3. ‚è≥ Implement Phase 2 (Frontend)
4. ‚è≥ Test all features
5. ‚è≥ Update documentation
6. ‚è≥ Deploy to production

---

**Last Updated**: 2025-10-24
**Author**: Claude AI Assistant
**Review Status**: Ready for Implementation
